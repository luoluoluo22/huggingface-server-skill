<Window xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'
        xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'
        Title='GlassNote' Height='600' Width='900'
        AllowsTransparency='True' WindowStyle='None' 
        ResizeMode='CanResize' Background='Transparent'>
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key='BoolToVis'/>
        <SolidColorBrush x:Key='BgDark' Color='#000000'/>
        <SolidColorBrush x:Key='AccentBlue' Color='#3B82F6'/>
        <LinearGradientBrush x:Key='GradientAI' StartPoint='0,0' EndPoint='1,1'>
            <GradientStop Color='#7C3AED' Offset='0.0'/>
            <GradientStop Color='#DB2777' Offset='1.0'/>
        </LinearGradientBrush>
        <Geometry x:Key='Icon_All'>M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z</Geometry>
        <Geometry x:Key='Icon_Star'>M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z</Geometry>
        <Geometry x:Key='Icon_Trash'>M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z</Geometry>
        <Geometry x:Key='Icon_Search'>M15.5,14H14.71L14.43,13.73C15.41,12.59 16,11.11 16,9.5C16,5.91 13.09,3 9.5,3C5.91,3 3,5.91 3,9.5C3,13.09 5.91,16 9.5,16C11.11,16 12.59,15.41 13.73,14.43L14,14.71V15.5L19,20.49L20.49,19L15.5,14ZM9.5,14C7.01,14 5,11.99 5,9.5C5,7.01 7.01,5 9.5,5C11.99,5 14,7.01 14,9.5C14,11.99 11.99,14 9.5,14Z</Geometry>
        <Geometry x:Key='Icon_Pin'>M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z</Geometry>
        <Geometry x:Key='Icon_Magic'>M12.5,5.6L10,0L7.5,5.6L1.9,8.1L7.5,10.6L10,16.2L12.5,10.6L18.1,8.1L12.5,5.6M19.1,11.9L17.5,8.1L15.9,11.9L12.1,13.5L15.9,15.1L17.5,18.9L19.1,15.1L22.9,13.5L19.1,11.9Z</Geometry>
        <Geometry x:Key='Icon_Plus'>M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z</Geometry>
        <Geometry x:Key='Icon_Send'>M2,21L23,12L2,3V10L17,12L2,14V21Z</Geometry>
        <Geometry x:Key='Icon_OpenLink'>M14,3H21V10H19V6.41L10.41,15L9,13.59L17.59,5H14V3M5,5H12V7H7V17H17V12H19V19H5V5Z</Geometry>
        <Geometry x:Key='Icon_Settings'>M19.14,12.94C19.18,12.64 19.2,12.33 19.2,12C19.2,11.67 19.18,11.36 19.14,11.06L21.19,9.47L19.19,6L16.78,7C16.3,6.63 15.77,6.32 15.2,6.1L14.84,3.5H9.16L8.8,6.1C8.23,6.32 7.7,6.63 7.22,7L4.81,6L2.81,9.47L4.86,11.06C4.82,11.36 4.8,11.67 4.8,12C4.8,12.33 4.82,12.64 4.86,12.94L2.81,14.53L4.81,18L7.22,17C7.7,17.37 8.23,17.68 8.8,17.9L9.16,20.5H14.84L15.2,17.9C15.77,17.68 16.3,17.37 16.78,17L19.19,18L21.19,14.53L19.14,12.94M12,15.5C10.07,15.5 8.5,13.93 8.5,12C8.5,10.07 10.07,8.5 12,8.5C13.93,8.5 15.5,10.07 15.5,12C15.5,13.93 13.93,15.5 12,15.5Z</Geometry>
        <Geometry x:Key='Icon_Close'>M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z</Geometry>
        <Geometry x:Key='Icon_Delete'>M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z</Geometry>
        <Geometry x:Key='Icon_Restore'>M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z</Geometry>

        <Style x:Key='NavButtonStyle' TargetType='RadioButton'>
            <Setter Property='Background' Value='Transparent'/>
            <Setter Property='Foreground' Value='#888888'/>
            <Setter Property='BorderThickness' Value='0'/>
            <Setter Property='Height' Value='40'/>
            <Setter Property='Margin' Value='0,0,0,5'/>
            <Setter Property='Template'>
                <Setter.Value>
                    <ControlTemplate TargetType='RadioButton'>
                        <Border x:Name='BtnBorder' Background='{TemplateBinding Background}' CornerRadius='8'>
                            <Grid>
                                <Border x:Name='ActiveBar' Width='3' Background='#3B82F6' CornerRadius='1.5' HorizontalAlignment='Left' Margin='0,8,0,8' Visibility='Collapsed'/>
                                <StackPanel x:Name='BtnStack' Orientation='Horizontal' VerticalAlignment='Center' HorizontalAlignment='Left' Margin='15,0,0,0'>
                                    <Viewbox Width='16' Height='16'>
                                        <Path Data='{Binding Tag, RelativeSource={RelativeSource TemplatedParent}}' Fill='{TemplateBinding Foreground}' Stretch='Uniform'/>
                                    </Viewbox>
                                    <TextBlock x:Name='BtnText' Text='{TemplateBinding Content}' Margin='15,0,0,0' VerticalAlignment='Center' FontSize='14' FontWeight='Medium' FontFamily='Microsoft YaHei UI'/>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property='IsMouseOver' Value='True'>
                                <Setter Property='Background' Value='#1A1A1A'/><Setter Property='Foreground' Value='White'/>
                            </Trigger>
                            <Trigger Property='IsChecked' Value='True'>
                                <Setter Property='Background' Value='#252525'/><Setter Property='Foreground' Value='White'/>
                                <Setter TargetName='ActiveBar' Property='Visibility' Value='Visible'/>
                            </Trigger>
                            <DataTrigger Binding='{Binding Content, RelativeSource={RelativeSource Self}}' Value=''>
                                <Setter TargetName='BtnStack' Property='Margin' Value='0,0,0,0'/>
                                <Setter TargetName='BtnText' Property='Visibility' Value='Collapsed'/>
                                <Setter TargetName='BtnStack' Property='HorizontalAlignment' Value='Center'/>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key='NoteItemStyle' TargetType='ListBoxItem'>
            <Setter Property='Background' Value='Transparent'/>
            <Setter Property='Margin' Value='0,0,0,10'/>
            <Setter Property='Padding' Value='0'/>
            <Setter Property='BorderThickness' Value='0'/>
            <Setter Property='Template'>
                <Setter.Value>
                    <ControlTemplate TargetType='ListBoxItem'>
                        <Border x:Name='ItemBorder' Background='{TemplateBinding Background}' CornerRadius='10' Padding='0'>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width='3'/><ColumnDefinition Width='*'/><ColumnDefinition Width='Auto'/>
                                </Grid.ColumnDefinitions>
                                <Border x:Name='DropTopLine' Grid.ColumnSpan='3' Height='2' Background='#3B82F6' VerticalAlignment='Top' HorizontalAlignment='Stretch' Visibility='Collapsed' CornerRadius='1'/>
                                <Border x:Name='DropBottomLine' Grid.ColumnSpan='3' Height='2' Background='#3B82F6' VerticalAlignment='Bottom' HorizontalAlignment='Stretch' Visibility='Collapsed' CornerRadius='1'/>
                                <Grid Grid.ColumnSpan='3' Margin='15'>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width='3'/><ColumnDefinition Width='*'/><ColumnDefinition Width='Auto'/>
                                    </Grid.ColumnDefinitions>
                                    <Border x:Name='ActiveBar' Grid.Column='0' Background='Transparent' CornerRadius='2'/>
                                    <StackPanel Grid.Column='1' Margin='10,0,0,0'>
                                        <TextBlock x:Name='NoteTitleText' Text='{Binding Title}' Foreground='White' FontWeight='Bold' FontSize='13' Margin='0,0,0,5' FontFamily='Microsoft YaHei UI' Cursor='SizeAll'/>
                                        <TextBlock Foreground='#888888' FontSize='12' TextTrimming='CharacterEllipsis' FontFamily='Microsoft YaHei UI'>
                                            <TextBlock.Style>
                                                <Style TargetType='TextBlock'>
                                                    <Setter Property='Text' Value='{Binding Preview}'/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding='{Binding Preview}' Value=''>
                                                            <Setter Property='Text' Value='æš‚æ— å†…å®¹'/><Setter Property='Foreground' Value='#555'/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </StackPanel>
                                    <!-- æµœã‚„ç°°å¯®å¿•ç–†æ¤¤èˆµå¯œé–½?-->
                                    <Button x:Name='BtnItemPin' Grid.Column='2' Width='24' Height='24' VerticalAlignment='Center' Cursor='Hand'>
                                        <Button.Template>
                                            <ControlTemplate TargetType='Button'>
                                                <Border x:Name='PinBd' Background='Transparent' CornerRadius='4'>
                                                    <Viewbox Width='12' Height='12'>
                                                        <Path x:Name='PinPath' Data='{StaticResource Icon_Pin}' Fill='#333' Stretch='Uniform'/>
                                                    </Viewbox>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <!-- å®¸èŒ¬ç–†æ¤¤å‰å§¸éŽ¬ä¾Šç´°æ¿®å¬¬ç²“é„å‰§ãšé–²æˆæµ˜é–½?-->
                                                    <DataTrigger Binding='{Binding IsPinned}' Value='True'>
                                                        <Setter TargetName='PinPath' Property='Fill' Value='#E0AB2B'/>
                                                        <Setter TargetName='PinBd' Property='Visibility' Value='Visible'/>
                                                    </DataTrigger>
                                                    <!-- æœªç½®é¡¶çŠ¶æ€ï¼šé»˜è®¤éšè— -->
                                                    <DataTrigger Binding='{Binding IsPinned}' Value='False'>
                                                        <Setter TargetName='PinBd' Property='Visibility' Value='Hidden'/>
                                                    </DataTrigger>
                                                    <!-- éˆî†ç–†æ¤¤?+ æ¦§çŠ³çˆ£é’æŽ•ç¹ƒé’æ¥„ã€ƒæ¤¤ç™¸ç´°é„å‰§ãšéæ¿æµ˜é–½?-->
                                                    <MultiDataTrigger>
                                                        <MultiDataTrigger.Conditions>
                                                            <Condition Binding='{Binding IsPinned}' Value='False'/>
                                                            <Condition Binding='{Binding IsMouseOver, RelativeSource={RelativeSource AncestorType=ListBoxItem}}' Value='True'/>
                                                        </MultiDataTrigger.Conditions>
                                                        <Setter TargetName='PinBd' Property='Visibility' Value='Visible'/>
                                                        <Setter TargetName='PinPath' Property='Fill' Value='#555'/>
                                                    </MultiDataTrigger>
                                                    <!-- æŒ‰é’®æœ¬èº«åˆ’è¿‡æ•ˆæžœ -->
                                                    <Trigger Property='IsMouseOver' Value='True'>
                                                        <Setter TargetName='PinBd' Property='Background' Value='#333'/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                </Grid>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property='IsSelected' Value='True'>
                                <Setter Property='Background' Value='#252525'/>
                                <Setter TargetName='ActiveBar' Property='Background' Value='{StaticResource AccentBlue}'/>
                            </Trigger>
                            <Trigger Property='IsMouseOver' Value='True'><Setter Property='Background' Value='#1A1A1A'/></Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key='ToolButtonStyle' TargetType='Button'>
            <Setter Property='Background' Value='Transparent'/><Setter Property='BorderThickness' Value='0'/><Setter Property='Cursor' Value='Hand'/><Setter Property='Width' Value='28'/><Setter Property='Height' Value='28'/>
            <Setter Property='Template'>
                <Setter.Value>
                    <ControlTemplate TargetType='Button'>
                        <Border x:Name='Bd' Background='{TemplateBinding Background}' CornerRadius='6'>
                            <ContentPresenter HorizontalAlignment='Center' VerticalAlignment='Center'/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property='IsMouseOver' Value='True'><Setter TargetName='Bd' Property='Background' Value='#333'/></Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Border CornerRadius='16' Background='{StaticResource BgDark}' BorderBrush='#333' BorderThickness='1'>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width='200'/><ColumnDefinition Width='250'/><ColumnDefinition Width='*'/>
            </Grid.ColumnDefinitions>
            <!-- ç’‹å†©æš£æ¾¶Ñƒçš¬éŽµå¬«ç„º -->
            <Rectangle x:Name='ResizeGrip' Grid.ColumnSpan='3' Width='24' Height='24' HorizontalAlignment='Right' VerticalAlignment='Bottom' Fill='Transparent' Cursor='SizeNWSE' Margin='0,0,0,0'/>
            <Grid x:Name='NavGrid' Grid.Column='0' Margin='5,20'>
                <Grid.RowDefinitions>
                    <RowDefinition Height='Auto'/><RowDefinition Height='*'/><RowDefinition Height='Auto'/>
                </Grid.RowDefinitions>
                <StackPanel x:Name='TitlePanel' Orientation='Horizontal' HorizontalAlignment='Stretch' VerticalAlignment='Center' Margin='0,0,0,30'>
                    <TextBlock x:Name='AppTitle' Text='çŽ»ç’ƒç¬”è®°' Foreground='White' FontSize='18' FontWeight='Bold' Margin='10,0,10,0' FontFamily='Microsoft YaHei UI' VerticalAlignment='Center'/>
                    <Button x:Name='BtnNavToggle' Width='24' Height='24' VerticalAlignment='Center' Cursor='Hand' ToolTip='æŠ˜å /å±•å¼€å¯¼èˆªæ '>
                        <Button.Template>
                            <ControlTemplate TargetType='Button'>
                                <Border Background='Transparent' CornerRadius='4'>
                                    <Viewbox Width='14' Height='14'>
                                        <Path x:Name='NavTogglePath' Data='M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z' Fill='#888' Stretch='Uniform'/>
                                    </Viewbox>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property='IsMouseOver' Value='True'>
                                        <Setter TargetName='NavTogglePath' Property='Fill' Value='White'/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
                <StackPanel Grid.Row='1'>
                    <RadioButton x:Name='NavAll' Content='å…¨éƒ¨ç¬”è®°' Tag='{StaticResource Icon_All}' Style='{StaticResource NavButtonStyle}' IsChecked='True'/>
                    <RadioButton x:Name='NavPinned' Content='å·²å›ºå®š' Tag='{StaticResource Icon_Star}' Style='{StaticResource NavButtonStyle}'/>
                    <RadioButton x:Name='NavTrash' Content='å›žæ”¶ç«™' Tag='{StaticResource Icon_Trash}' Style='{StaticResource NavButtonStyle}'/>
                </StackPanel>
                <StackPanel Grid.Row='2' Orientation='Vertical'>
                <Button x:Name='BtnSettings' Height='40' Background='#1F1F1F' BorderThickness='0' Cursor='Hand' HorizontalAlignment='Stretch' Margin='0,0,0,8'>
                    <Button.Template>
                        <ControlTemplate TargetType='Button'>
                            <Border x:Name='BtnBorder' Background='{TemplateBinding Background}' CornerRadius='10' Padding='15,0'>
                                <StackPanel x:Name='SettingsPanel' Orientation='Horizontal' HorizontalAlignment='Center' VerticalAlignment='Center'>
                                    <Viewbox x:Name='SettingsIcon' Width='14' Height='14' Margin='0,0,10,0'><Path Data='{StaticResource Icon_Settings}' Fill='#DDD' Stretch='Uniform'/></Viewbox>
                                    <TextBlock x:Name='SettingsText' Text='å‘å¸ƒè®¾ç½®' Foreground='#DDD' FontSize='14' FontFamily='Microsoft YaHei UI' VerticalAlignment='Center'/>
                                </StackPanel>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property='IsMouseOver' Value='True'><Setter Property='Background' Value='#2A2A2A'/></Trigger>
                                <Trigger Property='Tag' Value='collapsed'>
                                    <Setter TargetName='SettingsText' Property='Visibility' Value='Collapsed'/>
                                    <Setter TargetName='SettingsIcon' Property='Margin' Value='0'/>
                                    <Setter TargetName='BtnBorder' Property='Padding' Value='0,0'/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <Button x:Name='BtnNewNote' Height='40' Background='#252525' BorderThickness='0' Cursor='Hand' HorizontalAlignment='Stretch'>
                    <Button.Template>
                        <ControlTemplate TargetType='Button'>
                            <Border x:Name='BtnBorder' Background='{TemplateBinding Background}' CornerRadius='10' Padding='15,0'>
                                <StackPanel x:Name='NewNotePanel' Orientation='Horizontal' HorizontalAlignment='Center' VerticalAlignment='Center'>
                                    <Viewbox x:Name='NewNoteIcon' Width='14' Height='14' Margin='0,0,10,0'><Path Data='{StaticResource Icon_Plus}' Fill='White' Stretch='Uniform'/></Viewbox>
                                    <TextBlock x:Name='NewNoteText' Text='æ–°å»ºç¬”è®°' Foreground='White' FontWeight='SemiBold' FontSize='14' FontFamily='Microsoft YaHei UI' VerticalAlignment='Center'/>
                                </StackPanel>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property='IsMouseOver' Value='True'><Setter Property='Background' Value='#333'/></Trigger>
                                <Trigger Property='Tag' Value='collapsed'>
                                    <Setter TargetName='NewNoteText' Property='Visibility' Value='Collapsed'/>
                                    <Setter TargetName='NewNoteIcon' Property='Margin' Value='0'/>
                                    <Setter TargetName='BtnBorder' Property='Padding' Value='0,0'/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                </StackPanel>
            </Grid>
            <Border Grid.Column='0' HorizontalAlignment='Right' Width='1' Background='#1A1A1A'/>
            <Grid Grid.Column='1' Background='#0A0A0A'>
                <Grid.RowDefinitions><RowDefinition Height='Auto'/><RowDefinition Height='*'/></Grid.RowDefinitions>
                <Border Grid.Row='0' Background='#1A1A1A' CornerRadius='8' Height='36' Margin='15,20,15,10'>
                    <Grid>
                        <Viewbox Width='14' Height='14' HorizontalAlignment='Left' Margin='12,0'><Path Data='{StaticResource Icon_Search}' Fill='#666' Stretch='Uniform'/></Viewbox>
                        <TextBlock Text='æœç´¢ç¬”è®°...' Foreground='#666' FontSize='13' VerticalAlignment='Center' Margin='34,0,10,0' IsHitTestVisible='False' FontFamily='Microsoft YaHei UI'>
                            <TextBlock.Style>
                                <Style TargetType='TextBlock'><Setter Property='Visibility' Value='Collapsed'/>
                                    <Style.Triggers><DataTrigger Binding='{Binding Text, ElementName=SearchBox}' Value=''><Setter Property='Visibility' Value='Visible'/></DataTrigger></Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <TextBox x:Name='SearchBox' Background='Transparent' BorderThickness='0' Foreground='#CCC' VerticalContentAlignment='Center' Margin='30,0,10,0' FontSize='13' CaretBrush='White'/>
                    </Grid>
                </Border>
                <ListBox x:Name='NotesList' Grid.Row='1' Margin='10,0' Background='Transparent' BorderThickness='0' ItemContainerStyle='{StaticResource NoteItemStyle}' ScrollViewer.HorizontalScrollBarVisibility='Disabled'/>
            </Grid>
            <Border Grid.Column='1' HorizontalAlignment='Right' Width='1' Background='#1A1A1A'/>
            <Grid Grid.Column='2' x:Name='EditorPanel'>
                <Border Background='Black' CornerRadius='0,16,16,0'>
                    <Grid>
                        <Grid.RowDefinitions><RowDefinition Height='60'/><RowDefinition Height='Auto'/><RowDefinition Height='*'/><RowDefinition Height='Auto'/></Grid.RowDefinitions>
                        <Grid Grid.Row='0' Margin='30,20,20,0'>
                            <!-- Left Side of Top Toolbar: Status & Date -->
                            <StackPanel Orientation='Horizontal' HorizontalAlignment='Left' VerticalAlignment='Center'>
                                 <TextBlock x:Name='SaveStatusText' Foreground='#999999' FontSize='12' Margin='0,0,15,0' Text='å·²ä¿å­˜' VerticalAlignment='Center'/>
                                 <TextBlock x:Name='TextDate' Foreground='#666666' FontSize='12' Text='2023/10/01 12:00' VerticalAlignment='Center'/>
                            </StackPanel>
                            <StackPanel Orientation='Horizontal' HorizontalAlignment='Right'>
                                <Button x:Name='BtnWinTopmost' Style='{StaticResource ToolButtonStyle}' ToolTip='ç»æ¥€å½›ç¼ƒî‡€ã€Š' Margin='0,0,5,0'>
                                    <Viewbox Width='14' Height='14'><Path x:Name='WinPinIcon' Data='{StaticResource Icon_Pin}' Fill='#888' Stretch='Uniform'/></Viewbox>
                                </Button>
                                <Button x:Name='BtnDelete' Style='{StaticResource ToolButtonStyle}' ToolTip='é’çŠ»æ«Ž' Margin='0,0,5,0'>
                                    <Viewbox Width='14' Height='14'><Path Data='{StaticResource Icon_Delete}' Fill='#888' Stretch='Uniform'/></Viewbox>
                                </Button>
                                <Button x:Name='BtnRestore' Style='{StaticResource ToolButtonStyle}' ToolTip='æ¢å¤' Margin='0,0,5,0' Visibility='Collapsed'>
                                    <Viewbox Width='14' Height='14'><Path Data='{StaticResource Icon_Restore}' Fill='#888' Stretch='Uniform'/></Viewbox>
                                </Button>
                                <Button x:Name='BtnPublish' Style='{StaticResource ToolButtonStyle}' ToolTip='å‘å¸ƒ' Margin='0,0,5,0'>
                                    <Viewbox Width='14' Height='14'><Path Data='{StaticResource Icon_Send}' Fill='#888' Stretch='Uniform'/></Viewbox>
                                </Button>
                                <Button x:Name='BtnOpenUrl' Style='{StaticResource ToolButtonStyle}' ToolTip='æ‰“å¼€å‘å¸ƒé¡µ' Margin='0,0,5,0' Visibility='Collapsed'>
                                    <Viewbox Width='14' Height='14'><Path Data='{StaticResource Icon_OpenLink}' Fill='#888' Stretch='Uniform'/></Viewbox>
                                </Button>
                                <Button x:Name='BtnAI' Content='AI æ¶¦è‰²' Foreground='White' FontWeight='SemiBold' FontSize='12' FontFamily='Microsoft YaHei UI' Padding='12,6' BorderThickness='0' Cursor='Hand' Margin='0,0,10,0'>
                                    <Button.Background><StaticResource ResourceKey='GradientAI'/></Button.Background>
                                    <Button.Template>
                                        <ControlTemplate TargetType='Button'>
                                            <Border Background='{TemplateBinding Background}' CornerRadius='8'>
                                                <StackPanel Orientation='Horizontal' HorizontalAlignment='Center' VerticalAlignment='Center' Margin='10,5'>
                                                    <Viewbox Width='12' Height='12' Margin='0,0,5,0'><Path Data='{StaticResource Icon_Magic}' Fill='White' Stretch='Uniform'/></Viewbox>
                                                    <ContentPresenter VerticalAlignment='Center'/>
                                                </StackPanel>
                                            </Border>
                                            <ControlTemplate.Triggers><Trigger Property='IsMouseOver' Value='True'><Setter Property='Opacity' Value='0.9'/></Trigger></ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>
                                <Button x:Name='BtnClose' Width='32' Height='32' Background='Transparent' BorderThickness='0' Cursor='Hand'>
                                    <Button.Style>
                                        <Style TargetType='Button'>
                                            <Setter Property='Template'>
                                                <Setter.Value>
                                                    <ControlTemplate TargetType='Button'>
                                                        <Grid Background='{TemplateBinding Background}'>
                                                            <Viewbox Width='12' Height='12' HorizontalAlignment='Center' VerticalAlignment='Center'>
                                                                <Path x:Name='CloseIcon' Data='{StaticResource Icon_Close}' Fill='#666' Stretch='Uniform'/>
                                                            </Viewbox>
                                                        </Grid>
                                                        <ControlTemplate.Triggers><Trigger Property='IsMouseOver' Value='True'><Setter TargetName='CloseIcon' Property='Fill' Value='#FF4444'/></Trigger></ControlTemplate.Triggers>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </Button.Style>
                                </Button>
                            </StackPanel>
                        </Grid>
                        <!-- æ¶“î…¢æ£¿é”›æ°±ç´ªæˆæˆå°¯ (é’â•ƒæ•¤ Row=2 é¨?* æ¥‚æ¨ºå®³) -->
                <Grid Grid.Row='2' Margin='30,0,30,10'>
                    <Grid.RowDefinitions>
                        <RowDefinition Height='Auto'/>
                        <RowDefinition Height='Auto'/>
                        <RowDefinition Height='*'/>
                        <RowDefinition Height='Auto'/>
                    </Grid.RowDefinitions>

                    <!-- Header Info (Moved to Top Toolbar) -->
                    <!-- <StackPanel Orientation='Horizontal' HorizontalAlignment='Left' Margin='0,0,0,10'>
                         Moved to Grid.Row=0
                    </StackPanel> -->
                    
                    <TextBox x:Name='TxtTitle' Grid.Row='1' FontSize='24' FontWeight='Bold' Background='Transparent' BorderThickness='0' Foreground='#E0E0E0' CaretBrush='#E0E0E0' Margin='0,0,0,15' Text='æ— æ ‡é¢˜ç¬”è®°'/>
                        <!-- å†…å®¹åŒºåŸŸ -->
                        <Grid Grid.Row='2' Margin='0,0,0,5'>
                            <TextBlock x:Name='PlaceholderText' Text='æš‚æ— å†…å®¹ï¼Œå¼€å§‹è¾“å…¥...' Foreground='#444' FontSize='15' FontFamily='Microsoft YaHei UI' IsHitTestVisible='False' Visibility='Collapsed'/>
                            <TextBox x:Name='TxtContent' TextWrapping='Wrap' AcceptsReturn='True' Background='Transparent' BorderThickness='0' Foreground='#CCC' FontSize='15' FontFamily='Microsoft YaHei UI' CaretBrush='White' VerticalScrollBarVisibility='Auto' SelectionBrush='Yellow' SelectionTextBrush='Black'/>
                            <!-- éå‘´å„´éŽ¼æ»…å‚¨é?-->
                            <Border x:Name='InNoteSearchPanel' Visibility='Collapsed' VerticalAlignment='Top' HorizontalAlignment='Right' Background='#2A2A2A' CornerRadius='6' Padding='8,4' Margin='0,5,25,0'>
                                <Border.Effect><DropShadowEffect BlurRadius='10' Opacity='0.5' ShadowDepth='2'/></Border.Effect>
                                <StackPanel>
                                    <StackPanel Orientation='Horizontal' Margin='0,2'>
                                        <TextBox x:Name='InNoteSearchBox' Width='150' Background='#1A1A1A' Foreground='White' BorderThickness='0' VerticalContentAlignment='Center' Padding='5,0' FontSize='13' CaretBrush='White'/>
                                        <TextBlock x:Name='InNoteSearchCount' Text='0/0' Foreground='#888' FontSize='11' VerticalAlignment='Center' Margin='5,0' MinWidth='30' TextAlignment='Center'/>
                                        <Button x:Name='BtnFindNext' Style='{StaticResource ToolButtonStyle}' Width='30' Margin='5,0,0,0' ToolTip='æŸ¥æ‰¾ä¸‹ä¸€ä¸ª'>
                                            <Viewbox Width='12' Height='12'><Path Data='M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z' Fill='#AAA' Stretch='Uniform'/></Viewbox>
                                        </Button>
                                        <Button x:Name='BtnCloseSearch' Style='{StaticResource ToolButtonStyle}' Width='24' Margin='2,0,0,0'>
                                            <Viewbox Width='10' Height='10'><Path Data='{StaticResource Icon_Close}' Fill='#666' Stretch='Uniform'/></Viewbox>
                                        </Button>
                                    </StackPanel>
                                    <StackPanel Orientation='Horizontal' Margin='0,2'>
                                        <TextBox x:Name='InNoteReplaceBox' Width='150' Background='#1A1A1A' Foreground='White' BorderThickness='0' VerticalContentAlignment='Center' Padding='5,0' FontSize='13' CaretBrush='White'/>
                                        <Button x:Name='BtnReplace' Style='{StaticResource ToolButtonStyle}' Content='æ›¿æ¢' Foreground='#AAA' FontSize='11' Width='30' Margin='5,0,0,0' ToolTip='æ›¿æ¢å½“å‰'/>
                                        <Button x:Name='BtnReplaceAll' Style='{StaticResource ToolButtonStyle}' Content='å…¨éƒ¨' Foreground='#AAA' FontSize='11' Width='30' Margin='2,0,0,0' ToolTip='å…¨éƒ¨æ›¿æ¢'/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <Border x:Name='ImgPreviewPanel' Visibility='Collapsed' VerticalAlignment='Bottom' HorizontalAlignment='Right' Background='#1E1E1E' BorderBrush='#444' BorderThickness='1' CornerRadius='8' Padding='8' Margin='0,0,25,25' MaxWidth='350' MaxHeight='350' IsHitTestVisible='False'>
                                <Border.Effect><DropShadowEffect BlurRadius='15' Opacity='0.6' ShadowDepth='5'/></Border.Effect>
                                <Grid>
                                    <Grid.RowDefinitions><RowDefinition Height='Auto'/><RowDefinition Height='*'/></Grid.RowDefinitions>
                                    <TextBlock Text='ðŸž å›¾ç‰‡é¢„è§ˆ' Foreground='#888' FontSize='12' Margin='0,0,0,6' FontWeight='SemiBold'/>
                                    <Image x:Name='PreviewImage' Grid.Row='1' Stretch='Uniform' MaxWidth='330' MaxHeight='330'/>
                                </Grid>
                            </Border>
                        </Grid>
                    
                    <!-- Footer Info: Capacity & Sync Status -->
                    <StackPanel Grid.Row='3' Orientation='Horizontal' HorizontalAlignment='Right' Margin='0,5,0,0'>
                        <Path x:Name='CloudSyncIcon' Data='M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z' Fill='#666666' Height='14' Width='20' Stretch='Uniform' VerticalAlignment='Center' Margin='0,0,8,0' ToolTip='äº‘åŒæ­¥çŠ¶æ€'/>
                        <TextBlock x:Name='CapacityText' Foreground='#666666' FontSize='12' Text='éå¶ˆåž‚é—å ¥î–‚æ´? 0KB/100KB' VerticalAlignment='Center'/>
                    </StackPanel>
                </Grid>
                </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>";
